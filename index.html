<form action=javascript:doit()>
<input id='input' name='input' list='funcnames'>
<datalist id='funcnames'>
  <option value="rgb2hex r g b">
  <option value="rgb2hsl r g b">
  <option value="rgb2hsv r g b">
  <option value="hsl2hex h s l">
  <option value="hsl2rgb h s l">
  <option value="hsl2hsv h s l">
  <option value="hex2rgb #rrggbb">
  <option value="hex2hsl #rrggbb">
  <option value="hex2hsv #rrggbb">
  <option value="hsv2hex h s v">
  <option value="hsv2rgb h s v">
  <option value="hsv2hsl h s v">
</datalist>
<button>do it</button>
</form>
<pre id="output"></pre>
<script>
function ununit(what) {
  if(what > 1) {
    return what;
  }
  return what * 256;
}
function unit(what) {
  if(what > 1) {
    return what / 256;
  }
  return what;
}

// from http://stackoverflow.com/questions/1740700/how-to-get-hex-color-value-rather-than-rgb-value
var hexDigits = [0,1,2,3,4,5,6,7,8,9,"A","B","C","D","E","F"]
function hex(x) {
  x = parseInt(x);
  return isNaN(x) ? "00" : hexDigits[(x - x % 16) / 16] + hexDigits[x % 16];
}

function process(what) {
  if(what.substr) {
    return what;
  } else {
    return what.join(' ');
  } 
}

function floatTo256(f) {
  if(f.length) {
    var r = [];
    for(var i = 0; i < f.length; i++) {
      r.push(floatTo256(f[i]));
    }
    return r;
  }
  return f * 256;
}

var Convert = {
  // from https://gist.github.com/jonathantneal/2121882
  hsv2hsl: function(h, s, v) {
    var rgb = Convert.hsv2rgb(h, s, v);
    return Convert.rgb2hsl.apply(this, rgb);
  },
  hex2hsv: function(hex) {
    var rgb = Convert.hex2rgb(hex);
    return Convert.rgb2hsv.apply(this, rgb);
  },
  hex2hsl: function(hex) {
    var rgb = Convert.hex2rgb(hex);
    return Convert.rgb2hsl.apply(this, rgb);
  },
  hsv2hex: function(h, s, v) {
    var rgb = Convert.hsv2rgb(h, s, v);
    return Convert.rgb2hex.apply(this, rgb);
  },
  hsl2hex: function(h, s, l) {
    var rgb = Convert.hsl2rgb(h, s, l);
    return Convert.rgb2hex.apply(this, rgb);
  },
  hsl2hsv: function(h, s, l) {
    var rgb = Convert.hsl2rgb(h, s, l);
    return Convert.rgb2hsv.apply(this, rgb);
  },
  rgb2hex: function(r, g, b) {
    return '#' + hex(ununit(r)) + hex(ununit(g)) + hex(ununit(b));
  },

  hsl2rgb: function(h, s, l) {
    h = unit(h);
    s = unit(s);
    l = unit(l);

    if (s == 0) {
      return [l, l, l];
    }
     
    var temp2 = l < 0.5 ? l * (1 + s) : l + s - l * s;
    var temp1 = 2 * l - temp2;
     
    h /= 360;
     
    var
      rtemp = (h + 1 / 3) % 1,
      gtemp = h,
      btemp = (h + 2 / 3) % 1,
      rgb = [rtemp, gtemp, btemp],
      i = 0;
     
    for (; i < 3; ++i) {
      rgb[i] = rgb[i] < 1 / 6 ? temp1 + (temp2 - temp1) * 6 * rgb[i] : rgb[i] < 1 / 2 ? temp2 : rgb[i] < 2 / 3 ? temp1 + (temp2 - temp1) * 6 * (2 / 3 - rgb[i]) : temp1;
    }
     
    return floatTo256(rgb);
  },
  // from http://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb
  hex2rgb: function(hex) {
    var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    return result ? [
        parseInt(result[1], 16),
        parseInt(result[2], 16),
        parseInt(result[3], 16)
    ] : null;
  },
  // from https://github.com/kristopolous/skype-search/blob/master/js/ui.js
  hsv2rgb: function(h, s, v) {
    var ret;
    h = unit(h);
    s = unit(s);
    v = unit(v);

    h = (h % 1 + 1) % 1; // wrap hue

    var i = Math.floor(h * 6),
        f = h * 6 - i,
        p = v * (1 - s),
        q = v * (1 - s * f),
        t = v * (1 - s * (1 - f));

    switch (i) {
      case 0: ret = [v, t, p]; break;
      case 1: ret = [q, v, p]; break;
      case 2: ret = [p, v, t]; break;
      case 3: ret = [p, q, v]; break;
      case 4: ret = [t, p, v]; break;
      case 5: ret = [v, p, q]; break;
    }
    return floatTo256(ret);
  },

  rgb2hsl: function(r, g, b) {
    r = unit(r);
    g = unit(g);
    b = unit(b);

    var
      min = Math.min(r, g, b),
      max = Math.max(r, g, b),
      diff = max - min,
      h = 0, s = 0, l = (min + max) / 2;
       
    if (diff != 0) {
      s = l < 0.5 ? diff / (max + min) : diff / (2 - max - min);
       
      h = (r == max ? (g - b) / diff : g == max ? 2 + (b - r) / diff : 4 + (r - g) / diff) * 60;
    }
     
    return [h, s, l];
    return floatTo256([h, s, l]);
  }
};

function doit() {
  var value = document.getElementById('input').value,
    output = document.getElementById('output'),
    func,
    parts = value.split(' ');

  if(Convert[parts[0]]) {
    func = Convert[parts.shift()]; 
    // if the input is a hex code and that's not what we are looking for
    if(parts.length == 1 && func.length > 1){
      // convert it
      parts = Convert.hex2rgb(parts[0]);
    }
    // this means that our input should be integers
    if(func.length > 1) {
      for(var i = 0; i < parts.length; i++) {
        parts[i] = parseFloat(parts[i]);
      }
    }
    console.log(parts);
    output.innerHTML = '<div>' + value + "<br/>" + process(func.apply(this, parts)) + '</div>' + output.innerHTML;
  } else {
    output.innerHTML = parts.shift() + " not found";
  }
}
</script>
